(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{235:function(t,a,s){"use strict";s.r(a);var n=s(4),e=Object(n.a)({},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"разработка-пnагинов"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#разработка-пnагинов","aria-hidden":"true"}},[t._v("#")]),t._v(" Разработка плагинов")]),t._v(" "),s("h2",{attrs:{id:"основные-концепции"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#основные-концепции","aria-hidden":"true"}},[t._v("#")]),t._v(" Основные концепции")]),t._v(" "),s("p",[t._v("Существуют две основные части системы:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("@svel/cli")]),t._v(": установленный глобально, предоставляет команду "),s("code",[t._v("vue create <app>")]),t._v(";")]),t._v(" "),s("li",[s("code",[t._v("@svel/cli-service")]),t._v(": установленный локально, предоставляет команду "),s("code",[t._v("vue-cli-service")]),t._v(".")])]),t._v(" "),s("p",[t._v("Обе части используют архитектуру, основанную на плагинах.")]),t._v(" "),s("h3",{attrs:{id:"creator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#creator","aria-hidden":"true"}},[t._v("#")]),t._v(" Creator")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@svel/cli/lib/Creator.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Creator"),s("OutboundLink")],1),t._v(" — это класс, создаваемый при вызове "),s("code",[t._v("vue create <app>")]),t._v(". Отвечает за запросы пользователю для получения настроек, запускает генераторы и устанавливает зависимости.")]),t._v(" "),s("h3",{attrs:{id:"service"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#service","aria-hidden":"true"}},[t._v("#")]),t._v(" Service")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@svel/cli-service/lib/Service.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Service"),s("OutboundLink")],1),t._v(" — это класс, создаваемый при вызове "),s("code",[t._v("vue-cli-service <command> [...args]")]),t._v(". Отвечает за управление внутренней конфигурацией webpack, и предоставляет команды для запуска и сборки проекта.")]),t._v(" "),s("h3",{attrs:{id:"пnагин-дnя-cli-cli-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#пnагин-дnя-cli-cli-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" Плагин для CLI (CLI Plugin)")]),t._v(" "),s("p",[t._v("Плагин для CLI — это npm-пакет, который может добавлять дополнительные возможности в проект "),s("code",[t._v("@svel/cli")]),t._v(". Он должен всегда содержать "),s("a",{attrs:{href:"#service-plugin"}},[t._v("плагин для сервиса")]),t._v(" в качестве основного экспорта, и может опционально содержать "),s("a",{attrs:{href:"#generator"}},[t._v("Generator")]),t._v(" и "),s("a",{attrs:{href:"#prompts-for-3rd-party-plugins"}},[t._v("файл подсказок")]),t._v(".")]),t._v(" "),s("p",[t._v("Типичная структура каталогов плагина для CLI выглядит следующим образом:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v(".\n├── README.md\n├── generator.js  # генератор (опционально)\n├── prompts.js    # файл подсказок (опционально)\n├── index.js      # плагин для сервиса\n└── package.json\n")])])]),s("h3",{attrs:{id:"пnагин-дnя-сервиса-service-plugin"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#пnагин-дnя-сервиса-service-plugin","aria-hidden":"true"}},[t._v("#")]),t._v(" Плагин для сервиса (Service Plugin)")]),t._v(" "),s("p",[t._v("Сервисные плагины загружаются автоматически при создании экземпляра сервиса — т.е. каждый раз когда команда "),s("code",[t._v("vue-cli-service")]),t._v(" вызывается внутри проекта.")]),t._v(" "),s("p",[t._v("Обратите внимание, что концепция «плагина для сервиса», которую мы обсуждаем здесь, несколько уже, чем концепция «плагина для CLI», который публикуется как npm-пакет. Первый относится только к модулю, который будет загружен "),s("code",[t._v("@svel/cli-service")]),t._v(" когда он инициализирован, и обычно является частью последнего.")]),t._v(" "),s("p",[t._v("Кроме того, "),s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@svel/cli-service/lib/commands",target:"_blank",rel:"noopener noreferrer"}},[t._v("встроенные команды"),s("OutboundLink")],1),t._v(" и "),s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@svel/cli-service/lib/config",target:"_blank",rel:"noopener noreferrer"}},[t._v("конфигурация модулей"),s("OutboundLink")],1),t._v(" "),s("code",[t._v("@svel/cli-service")]),t._v(" также реализованы как плагины для сервиса.")]),t._v(" "),s("p",[t._v("Плагин для сервиса должен экспортировать функцию, которая принимает два аргумента:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Экземпляр "),s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@svel/cli-service/lib/PluginAPI.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("PluginAPI"),s("OutboundLink")],1)])]),t._v(" "),s("li",[s("p",[t._v("Объект, содержащий локальные настройки проекта, указанные в "),s("code",[t._v("svelte.config.js")]),t._v(", или в поле "),s("code",[t._v('"vue"')]),t._v(" в "),s("code",[t._v("package.json")]),t._v(".")])])]),t._v(" "),s("p",[t._v("API позволяет плагинам для сервиса расширять / изменять внутреннюю конфигурацию webpack для разных окружений и внедрять дополнительные команды в "),s("code",[t._v("vue-cli-service")]),t._v(". Например:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" projectOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("chainWebpack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("webpackConfig "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// изменение конфигурации webpack с помощью webpack-chain")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("configureWebpack")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("webpackConfig "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// изменение конфигурации webpack")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// или возвращение объекта, который будет объединён с помощью webpack-merge")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'test'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// регистрация команды `vue-cli-service test`")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"установка-режимов-дnя-команд"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#установка-режимов-дnя-команд","aria-hidden":"true"}},[t._v("#")]),t._v(" Установка режимов для команд")]),t._v(" "),s("blockquote",[s("p",[t._v("Примечание: установка режимов плагинами была изменена в beta.10.")])]),t._v(" "),s("p",[t._v("Если зарегистрированная в плагине команда должна запускаться в определённом режиме по умолчанию,\nплагин должен предоставлять её через "),s("code",[t._v("module.exports.defaultModes")]),t._v(" в формате "),s("code",[t._v("{ [commandName]: mode }")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'build'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaultModes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  build"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Это связано с тем, что ожидаемый режим для команды должен быть известен до загрузки переменных окружения, что в свою очередь должно произойти до загрузки пользовательских настроек / применения плагинов.")]),t._v(" "),s("h4",{attrs:{id:"поnучение-итоговой-конфигурации-webpack-в-пnагинах"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#поnучение-итоговой-конфигурации-webpack-в-пnагинах","aria-hidden":"true"}},[t._v("#")]),t._v(" Получение итоговой конфигурации Webpack в плагинах")]),t._v(" "),s("p",[t._v("Плагин может получить итоговую конфигурацию webpack вызвав "),s("code",[t._v("api.resolveWebpackConfig()")]),t._v(". Каждый вызов генерирует новую конфигурацию webpack, которая может быть дополнительно изменена при необходимости:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-build'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" configA "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveWebpackConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" configB "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveWebpackConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// изменение configA и configB для разных целей...")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// не забудьте указать режим по умолчанию для правильных переменных окружения")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("defaultModes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-build'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("В качестве альтернативы, плагин также может получить новую "),s("a",{attrs:{href:"https://github.com/mozilla-neutrino/webpack-chain",target:"_blank",rel:"noopener noreferrer"}},[t._v("конфигурацию в формате chainable"),s("OutboundLink")],1),t._v(" вызвав "),s("code",[t._v("api.resolveChainableWebpackConfig()")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerCommand")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-build'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" args "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" configA "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveChainableWebpackConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" configB "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolveChainableWebpackConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// изменяем цепочки configA и configB для разных целей...")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" finalConfigA "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" configA"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" finalConfigB "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" configB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("toConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h4",{attrs:{id:"поnьзоватеnьские-настройки-дnя-сторонних-пnагинов"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#поnьзоватеnьские-настройки-дnя-сторонних-пnагинов","aria-hidden":"true"}},[t._v("#")]),t._v(" Пользовательские настройки для сторонних плагинов")]),t._v(" "),s("p",[t._v("Экспорт из "),s("code",[t._v("svelte.config.js")]),t._v(" "),s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/blob/dev/packages/%40vue/cli-service/lib/options.js#L3",target:"_blank",rel:"noopener noreferrer"}},[t._v("валидируется по схеме"),s("OutboundLink")],1),t._v(" чтобы избежать опечаток и неправильных значений конфигурации. Тем не менее, можно настраивать поведение сторонних плагинов через поле "),s("code",[t._v("pluginOptions")]),t._v(". Например, для следующего "),s("code",[t._v("svelte.config.js")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  pluginOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* ... */")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Сторонний плагин может получить доступ к свойству "),s("code",[t._v("projectOptions.pluginOptions.foo")]),t._v(" для определения собственной конфигурации.")]),t._v(" "),s("h3",{attrs:{id:"генератор-generator"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#генератор-generator","aria-hidden":"true"}},[t._v("#")]),t._v(" Генератор (Generator)")]),t._v(" "),s("p",[t._v("Плагин для CLI, опубликованный как пакет, может содержать файл "),s("code",[t._v("generator.js")]),t._v(" или "),s("code",[t._v("generator/index.js")]),t._v(". Генератор внутри плагина вызывается в двух возможных сценариях:")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("Во время первоначального создания проекта, если плагин для CLI установлен как часть пресета для создания проекта.")])]),t._v(" "),s("li",[s("p",[t._v("Когда плагин устанавливается после создания проекта и вызывается через "),s("code",[t._v("vue invoke")]),t._v(".")])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@svel/cli/lib/GeneratorAPI.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("GeneratorAPI"),s("OutboundLink")],1),t._v(" позволяет генератору внедрять дополнительные зависимости или поля в "),s("code",[t._v("package.json")]),t._v(" и добавлять файлы в проект.")]),t._v(" "),s("p",[t._v("Генератор должен экспортировать функцию, которая принимает три аргумента:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Экземпляр "),s("code",[t._v("GeneratorAPI")]),t._v(";")])]),t._v(" "),s("li",[s("p",[t._v("Настройки генератора для этого плагина. Они будут получены во время интерактивного выбора пользователем на этапе создания проекта, или загружаются из сохранённого пресета в "),s("code",[t._v("~/.vuerc")]),t._v(". Например, если сохранённый файл "),s("code",[t._v("~/.vuerc")]),t._v(" выглядит так:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"presets"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"foo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"plugins"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"@svel/cli-plugin-foo"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"option"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("И если пользователь создаёт проект с использованием пресета "),s("code",[t._v("foo")]),t._v(", тогда генератор "),s("code",[t._v("@svel/cli-plugin-foo")]),t._v(" получит "),s("code",[t._v("{ option: 'bar' }")]),t._v(" в качестве второго аргумента.")]),t._v(" "),s("p",[t._v("Для стороннего плагина эти параметры будут получены из интерактивного выбора пользователем или аргументов командной строки, когда выполняется команда "),s("code",[t._v("vue invoke")]),t._v(" (см. "),s("a",{attrs:{href:"#%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B5-%D0%BF%D0%BE%D0%B4%D1%81%D0%BA%D0%B0%D0%B7%D0%BA%D0%B8-%D0%B4n%D1%8F-%D1%81%D1%82%D0%BE%D1%80%D0%BE%D0%BD%D0%BD%D0%B8%D1%85-%D0%BFn%D0%B0%D0%B3%D0%B8%D0%BD%D0%BE%D0%B2"}},[t._v("Интерактивные подсказки для сторонних плагинов")]),t._v(").")])]),t._v(" "),s("li",[s("p",[t._v("Весь пресет ("),s("code",[t._v("presets.foo")]),t._v(") будет передан в качестве третьего аргумента.")])])]),t._v(" "),s("p",[s("strong",[t._v("Например:")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" rootOptions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// изменение полей package.json")]),t._v("\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("extendPackage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    scripts"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      test"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-cli-service test'")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// копирование и рендеринг всех файлов в ./template с помощью ejs")]),t._v("\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./template'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// генерация файлов по условию")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"шабnоны-генератора"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#шабnоны-генератора","aria-hidden":"true"}},[t._v("#")]),t._v(" Шаблоны генератора")]),t._v(" "),s("p",[t._v("Когда вы вызываете "),s("code",[t._v("api.render('./template')")]),t._v(", генератор будет рендерить файлы в "),s("code",[t._v("./template")]),t._v(" (разрешённые относительно файла генератора) с помощью "),s("a",{attrs:{href:"https://github.com/mde/ejs",target:"_blank",rel:"noopener noreferrer"}},[t._v("EJS"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Кроме того, вы можете наследовать и заменять части существующего файла шаблона (даже из другого пакета) с помощью YAML front-matter:")]),t._v(" "),s("div",{staticClass:"language-ejs extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("---\nextend: '@svel/cli-service/generator/template/src/App.vue'\nreplace: !!js/regexp /<script>[^]*?<\\/script>/\n---\n\n<script>\nexport default {\n  // Заменяем скрипт по умолчанию\n}\n<\/script>\n")])])]),s("p",[t._v("Также возможно выполнять несколько замен в файле, хотя вам потребуется обернуть строки для замены в блоки из "),s("code",[t._v("<%# REPLACE %>")]),t._v(" и "),s("code",[t._v("<%# END_REPLACE %>")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-ejs extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("---\nextend: '@svel/cli-service/generator/template/src/App.vue'\nreplace:\n  - !!js/regexp /Welcome to Your Vue\\.js App/\n  - !!js/regexp /<script>[^]*?<\\/script>/\n---\n\n<%# REPLACE %>\nЗаменяем приветственное сообщение\n<%# END_REPLACE %>\n\n<%# REPLACE %>\n<script>\nexport default {\n  // Заменяем скрипт по умолчанию\n}\n<\/script>\n<%# END_REPLACE %>\n")])])]),s("h4",{attrs:{id:"ограничения-имён-файnов"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ограничения-имён-файnов","aria-hidden":"true"}},[t._v("#")]),t._v(" Ограничения имён файлов")]),t._v(" "),s("p",[t._v("Если вы хотите отрендерить файл шаблона, имя которого начинается с точки (т.е. "),s("code",[t._v(".env")]),t._v(") вам необходимо следовать определённому соглашению по именованию, поскольку файлы именуемые с точки (dotfiles) игнорируются при публикации вашего плагина в npm:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# dotfile шаблоны должны использовать символ подчёркивания вместо точки:\n\n/generator/template/_env\n\n# При вызове api.render('./template'), это будет отрендерено в каталоге проекта как:\n\n.env\n")])])]),s("p",[t._v("Следовательно, это значит, что необходимо также следовать специальному соглашению по именованию если вы хотите отрендерить файл, чьё имя начинается с подчёркивания:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("# такие шаблоны должны иметь два символа подчёркивания вместо точки:\n\n/generator/template/__variables.scss\n\n# При вызове api.render('./template'), это будет отрендерено в каталоге проекта как:\n\n_variables.scss\n")])])]),s("h3",{attrs:{id:"интерактивные-подсказки"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#интерактивные-подсказки","aria-hidden":"true"}},[t._v("#")]),t._v(" Интерактивные подсказки")]),t._v(" "),s("h4",{attrs:{id:"интерактивные-подсказки-дnя-встроенных-пnагинов"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#интерактивные-подсказки-дnя-встроенных-пnагинов","aria-hidden":"true"}},[t._v("#")]),t._v(" Интерактивные подсказки для встроенных плагинов")]),t._v(" "),s("p",[t._v("Только встроенные плагины имеют возможность настраивать исходные подсказки при создании нового проекта, а модули подсказок расположены "),s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@svel/cli/lib/promptModules",target:"_blank",rel:"noopener noreferrer"}},[t._v("внутри пакета "),s("code",[t._v("@svel/cli")]),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[t._v("Модуль подсказок должен экспортировать функцию, которая получает экземпляр "),s("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/@svel/cli/lib/PromptModuleAPI.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("PromptModuleAPI"),s("OutboundLink")],1),t._v(". Подсказки представлены с помощью "),s("a",{attrs:{href:"https://github.com/SBoudrias/Inquirer.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("inquirer"),s("OutboundLink")],1),t._v(" под капотом:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" api "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// объект возможности должен быть корректным объектом выбора inquirer")]),t._v("\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("injectFeature")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Какая-то суперская возможность'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-feature'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// injectPrompt ожидает корректный объект подсказки inquirer")]),t._v("\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("injectPrompt")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'someFlag'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// убедитесь, что подсказка отображается только если выбрана ваша функция")]),t._v("\n    when"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" answers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" answers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("features"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("include")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-feature'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    message"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Вы хотите включить флаг foo?'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    type"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'confirm'")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// когда все подсказки завершены, внедряйте ваш плагин в настройки,")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// которые будут передаваться генераторам")]),t._v("\n  api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onPromptComplete")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("answers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("answers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("features"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("includes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'my-feature'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      options"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-cli-plugin-my-feature'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        someFlag"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" answers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("someFlag\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"интерактивные-подсказки-дnя-сторонних-пnагинов"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#интерактивные-подсказки-дnя-сторонних-пnагинов","aria-hidden":"true"}},[t._v("#")]),t._v(" Интерактивные подсказки для сторонних плагинов")]),t._v(" "),s("p",[t._v("Плагины сторонних разработчиков обычно устанавливаются вручную после того, как проект уже создан, и пользователь будет инициализировать плагин вызовом команды "),s("code",[t._v("vue invoke")]),t._v(". Если плагин содержит "),s("code",[t._v("prompts.js")]),t._v(" в своём корневом каталоге, он будет использован во время вызова. Файл должен экспортировать массив "),s("a",{attrs:{href:"https://github.com/SBoudrias/Inquirer.js#question",target:"_blank",rel:"noopener noreferrer"}},[t._v("вопросов"),s("OutboundLink")],1),t._v(", которые будут обрабатываться Inquirer.js. Объект с ответами будет передаваться генератору плагина в качестве настроек.")]),t._v(" "),s("p",[t._v("В качестве альтернативы, пользователь может пропустить подсказки и напрямую инициализировать плагин, передав параметры через командную строку, например:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("vue invoke my-plugin --mode awesome\n")])])]),s("h2",{attrs:{id:"распространение-пnагина"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#распространение-пnагина","aria-hidden":"true"}},[t._v("#")]),t._v(" Распространение плагина")]),t._v(" "),s("p",[t._v("Чтобы CLI-плагин мог использоваться другими разработчиками, он должен быть опубликован на npm придерживаясь соглашения по именованию "),s("code",[t._v("vue-cli-plugin-<name>")]),t._v(". Следуя соглашению по именованию позволит вашему плагину быть:")]),t._v(" "),s("ul",[s("li",[t._v("Легко находимым с помощью "),s("code",[t._v("@svel/cli-service")]),t._v(";")]),t._v(" "),s("li",[t._v("Легко находимым другими разработчиками через поиск;")]),t._v(" "),s("li",[t._v("Устанавливаться через "),s("code",[t._v("vue add <name>")]),t._v(" или "),s("code",[t._v("vue invoke <name>")]),t._v(".")])]),t._v(" "),s("h2",{attrs:{id:"примечание-о-разработке-core-пnагинов"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#примечание-о-разработке-core-пnагинов","aria-hidden":"true"}},[t._v("#")]),t._v(" Примечание о разработке Core-плагинов")]),t._v(" "),s("div",{staticClass:"tip custom-block"},[s("p",{staticClass:"custom-block-title"},[t._v("Примечание")]),t._v(" "),s("p",[t._v("Этот раздел применим только в случае, если вы работаете над встроенным плагином непосредственно внутри "),s("code",[t._v("vuejs/vue-cli")]),t._v(" репозитория.")])]),t._v(" "),s("p",[t._v("Плагин с генератором, который внедряет дополнительные зависимости, отличные от пакетов в репозитории (например, "),s("code",[t._v("chai")]),t._v(" внедряется "),s("code",[t._v("@svel/cli-plugin-unit-mocha/generator/index.js")]),t._v(") должен перечислять эти зависимости в собственном поле "),s("code",[t._v("devDependencies")]),t._v(". Это гарантирует:")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("что пакет всегда существует в корневом "),s("code",[t._v("node_modules")]),t._v(" репозитория, поэтому нам не нужно их переустанавливать при каждом тестировании.")])]),t._v(" "),s("li",[s("p",[t._v("что "),s("code",[t._v("yarn.lock")]),t._v(" остаётся постоянным, поэтому CI сможет лучше применять его кэширование.")])])])])},[],!1,null,null,null);a.default=e.exports}}]);